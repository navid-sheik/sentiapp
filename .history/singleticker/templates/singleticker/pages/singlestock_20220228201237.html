{% extends "singleticker/base.html" %} {% block content %}

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/solid.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">




<div id="app" class='container' style="width: 100%;">

    <div class="row" style="padding: 5px;">
        <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12" style="background-color: none; padding: 5px;">


            <div class="card card-block" style="padding: 5px;background-color: #383c48; color: white;">

                <div class="row no-gutters flex-nowrap" style="background-color: none;">

                    <div class="col-8">

                        <div style="display: flex;flex-direction: row;">
                            <div>
                                <h3> Tesla, Inc. </h3>

                            </div>


                        </div>


                        <div style="display: flex;flex-direction: row;background-color: none;">
                            <div>

                                $TSLA -
                            </div>

                            <div>

                                Tehcnology
                            </div>



                        </div>




                    </div>



                    <div class="col d-flex justify-content-end" style="background-color: none;">
                        <img style="width: 100px;" src="https://financialmodelingprep.com/image-stock/TSLA.png" />




                    </div>





                </div>


                <div class="row no-gutters" style="background-color: none;">
                    <div style="display: flex;flex-direction: column;background-color: none;">
                        <div style="background-color: none;">
                            <h4>$902.8 </h4>

                        </div>

                        <div style="display: flex;flex-direction: row;background-color: none;">
                            <div>

                                %13.3 -
                            </div>

                            <div>

                                $12.5 -
                            </div>


                            <div>

                                Today
                            </div>


                        </div>




                    </div>




                </div>



            </div>




        </div>

        <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12" style="background-color: none; padding: 5px;">


            <div class="card card-block" style="padding: 5px; background-color: #383c48; color: white;">

                <h6> STATS </h6>
                <div style="background-color: none; display: flex;flex-direction: row; flex-wrap: wrap;">
                    <div class="flexItem" style="display: flex; flex-direction: column;">
                        <div>
                            $886.00

                        </div>
                        <div>
                            Market Open

                        </div>
                    </div>
                    <div class="flexItem" style="display: flex; flex-direction: column;">
                        <div>
                            $886.00

                        </div>
                        <div>
                            High

                        </div>
                    </div>

                    <div class="flexItem" style="display: flex; flex-direction: column;">
                        <div>
                            $886.00

                        </div>
                        <div>
                            Low

                        </div>
                    </div>

                    <div class="flexItem" style="display: flex; flex-direction: column;">
                        <div>
                            $886.00B

                        </div>
                        <div>
                            Market cap

                        </div>
                    </div>

                    <div class="flexItem" style="display: flex; flex-direction: column;">
                        <div>
                            -

                        </div>
                        <div>
                            Dividend yield

                        </div>
                    </div>

                    <div class="flexItem" style="display: flex; flex-direction: column;">
                        <div>
                            153.03

                        </div>
                        <div>
                            P/E ratio

                        </div>
                    </div>

                </div>
            </div>

        </div>


    </div>


    <div class="row" style="margin-top: 20px;background-color: none;">
        <div class="col-lg-8 col-md-12 col-sm-12 col-xs-12" style="background-color: none;padding: 5px;">

            <div class="card card-block"
                style="background-color: none;display: flex; flex-direction: column; padding: 5px; background-color: #383c48; margin-bottom: 10px;">

                <div
                    style="background-color: none; display: flex; flex-direction: row;justify-content: space-between; align-items: stretch; column-gap: 10px;">
                    <div style="background-color: none;flex: 1;">
                        <button type="button" class="btn btn-primary" style="width: 100%;"
                            @click.native="stockHistoryDynamics()">1D</button>

                    </div>

                    <div style="background-color: none;flex: 1; ">
                        <button type="button" class="btn btn-secondary" style="width: 100%;"
                            @click.native="stockHistory5Days()">5D</button>

                    </div>


                    <div style="background-color: none; flex: 1;">
                        <button type="button" class="btn btn-secondary" style="width: 100%;"
                            @click.native="stockHistory1Month()">1M</button>

                    </div>

                    <div style="background-color: none;flex: 1;">
                        <button type="button" class="btn btn-secondary" style="width: 100%;"
                            @click.native="stockHistory1Year()">1Y</button>

                    </div>

                    <div style="background-color: none;flex: 1;">
                        <button type="button" class="btn btn-secondary" style="width: 100%;"
                            @click.native="stockHistory5Years()">5Y</button>

                    </div>

                    <div style="background-color: none;flex: 1;">
                        <button type="button" class="btn btn-secondary" style="width: 100%;"
                            @click.native="stockHistoryMax()">MAX</button>


                    </div>


                </div>



                <div style="background-color: none;">
                    <canvas id="stockChart"></canvas>

                </div>


            </div>

        </div>



        <div class="col" style="background-color: none; padding: 5px; ">

            <div class="card card-block" style="background-color: #383c48; color: white; padding: 5px;">

                <div>
                    <h5>ABOUT</h5>
                </div>
                <div style="height: 150px; text-overflow: ellipsis; overflow: hidden;margin-bottom: 10px;">
                    Intel Corporation, stylized as intel, is an American multinational corporation and technology
                    company headquartered in Santa Clara, California. It is the world's largest semiconductor chip
                    manufacturer by revenue, and is the developer of the x86 series of microprocessors, the processors
                    found in most personal computers. Incorporated in Delaware, Intel ranked No. 45 in the 2020 Fortune
                    500 list of the largest United States corporations by total revenue for nearly a decade, from 2007
                    to 2016 fiscal years. Intel supplies microprocessors for computer system manufacturers such as Acer,
                    Lenovo, HP,

                </div>
                <div
                    style="display: flex;flex-direction: row; justify-content: space-between; border-bottom: 2px solid white;margin-bottom: 5px;margin-top: 5px;">
                    <div style="color: white;">
                        <span>CEO </span>
                    </div>

                    <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                        <span>Elon Musk </span>
                    </div>
                </div>



                <div
                    style="display: flex;flex-direction: row; justify-content: space-between;  border-bottom: 2px solid white;margin-bottom: 5px;margin-top: 5px;">
                    <div style="color: white;">
                        <span>FOUNDED </span>
                    </div>

                    <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                        <span>18/06/1968 </span>
                    </div>
                </div>




                <div
                    style="display: flex;flex-direction: row; justify-content: space-between;  border-bottom: 2px solid white;margin-bottom: 5px;margin-top: 5px;">
                    <div style="color: white;">
                        <span>EXCHANGE </span>
                    </div>

                    <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                        <span>NASQUA </span>
                    </div>
                </div>


                <div
                    style="display: flex;flex-direction: row; justify-content: space-between; border-bottom: 2px solid white;margin-bottom: 5px;margin-top: 5px;">
                    <div style="color: white;">
                        <span>WEBSITE </span>
                    </div>

                    <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                        <span>www.apple.com </span>
                    </div>
                </div>


                <div
                    style="display: flex;flex-direction: row; justify-content: space-between; border-bottom: 2px solid white;margin-bottom: 5px;margin-top: 5px;">
                    <div style="color: white;">
                        <span>EMPLOYEES </span>
                    </div>

                    <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                        <span>7,000 </span>
                    </div>
                </div>


            </div>


        </div>

    </div>








    <div style="display: flex;flex-direction: row; justify-content: flex-start;">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown button
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else here</a>
                <!-- <button @click.native="getRecentTweets()"> Get recent tweets </button> -->
            </div>
        </div>
    </div>
    <!--tweete popular-->

    <div class="row flex-nowrap" style="background-color: bisque;overflow-y: scroll;padding : 0px; ">

        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12" v-for="tweet in tweet_list_popular_recent">

            <div class="card card-block"
                style="padding: 10px;display: flex; flex-direction: column;background-color: #383c48; color: white; ">
                <!-- TICKER-->
                <div id="tweet-top-container" style="background-color: none; display: flex;flex-direction: row;">

                    <div style="background-color: none;">
                        <img v-bind:src="`${tweet.user.profile_image_url}`" style="width: 60px;" class="rounded">
                    </div>

                    <div style="background-color: none; padding: 0 1rem;">
                        <div>
                            <span style="background-color: none;"> <b> [[tweet.user.name]] </b></span>
                        </div>
                        <!-- STOCK NAME-->
                        <div style=" text-overflow: ellipsis; overflow: hidden; color: whitesmoke;">
                            <span> @[[tweet.user.screen_name]]</span>

                        </div>
                    </div>

                </div>

                <div
                    style="display: inline-block; margin-top: 10px; height: 100px; overflow: hidden; text-overflow: ellipsis;">


                    <p>[[tweet.full_text]]</p>
                </div>

                <div style="display: flex; flex-direction: row; column-gap: 5; justify-content: stretch;">


                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa-solid fa-heart"></i>
                        </div>
                        <div style="background-color: none;">
                            [[tweet.favorite_count]]

                        </div>

                    </div>

                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa fa-retweet"></i>
                        </div>
                        <div style="background-color: none;">
                            [[tweet.retweet_count]]

                        </div>

                    </div>



                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa-solid fa-comment"></i>
                        </div>
                        <div style="background-color: none;">
                            24

                        </div>

                    </div>



                </div>
            </div>
        </div>
    </div>

    <!--SENTIMENT ANALYSIS-->

    <div class="row" style="margin-top: 20px;background-color: none;">
        <div class="col-lg-8 col-md-12 col-sm-12 col-xs-12" style="background-color: none;padding: 5px;">

            <div class="card card-block"
                style="background-color: none;display: flex; flex-direction: column; padding: 5px; background-color: #383c48; margin-bottom: 10px;">

                <div
                    style="background-color: none; display: flex; flex-direction: row;justify-content: space-between; align-items: stretch; column-gap: 10px;">
                    <div style="background-color: none;flex: 1;">
                        <button type="button" class="btn btn-primary" @click.native="sentimentAnalysis24Hours()"
                            style="width: 100%;">1D</button>

                    </div>

                    <div style="background-color: none;flex: 1; ">
                        <button type="button" class="btn btn-secondary" @click.native="sentimentAnalysisRange(5)"
                            style="width: 100%;">5D</button>

                    </div>


                    <div style="background-color: none; flex: 1;">
                        <button type="button" class="btn btn-secondary" @click.native="sentimentAnalysisRange(90)"
                            style="width: 100%;">3M</button>


                    </div>

                    <div style="background-color: none;flex: 1;">
                        <button type="button" class="btn btn-secondary" @click.native="sentimentAnalysisRange(365)"
                            style="width: 100%;">1Y</button>

                    </div>



                    <div style="background-color: none;flex: 1;">


                        <button type="button" class="btn btn-secondary" @click.native="sentimentAnalysisRange(1825)"
                            style="width: 100%;">5Y</button>


                    </div>


                    <div style="background-color: none;flex: 1;">


                        <button type="button" class="btn btn-secondary" @click.native=""
                            style="width: 100%;">MAX</button>


                    </div>

























                </div>



                <div style="background-color: none;">
                    <canvas id="analysischart"></canvas>


                </div>


            </div>

        </div>



        <div class="col" style="background-color: none; padding: 5px; ">

            <div class="card card-block" style="background-color: #383c48; color: white; padding: 5px;">

                <div class="card-body">
                    <h5 class="card-title">SENTIMEN OVERVIEW</h5>
                    <span class="card-text">Here you can see the public sentiment based on twitter over the last 24
                        hours
                    </span>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" style="background-color: #383c48;">
                        <div style="display: flex;flex-direction: row; justify-content: space-between; ">
                            <div style="color: white;">
                                <span>COMPOUND </span>
                            </div>

                            <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                                <span>[[mean_24_compound]] </span>
                            </div>
                        </div>



                    </li>
                    <li class="list-group-item" style="background-color: #383c48;">
                        <div style="display: flex;flex-direction: row; justify-content: space-between; ">
                            <div style="color: white;">
                                <span>POSITIVITY </span>
                            </div>

                            <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                                <span>[[mean_24_positivity]]</span>
                            </div>

                        </div>


                    </li>
                    <li class="list-group-item" style="background-color: #383c48;">
                        <div style="display: flex;flex-direction: row; justify-content: space-between; ">
                            <div style="color: white;">
                                <span>NEGATIVITY </span>
                            </div>

                            <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                                <span>[[mean_24_negativity]]</span>
                            </div>
                        </div>

                    </li>
                    <li class="list-group-item" style="background-color: #383c48;">
                        <div style="display: flex;flex-direction: row; justify-content: space-between; ">
                            <div style="color: white;">
                                <span>NEUTRALITY </span>
                            </div>

                            <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                                <span>[[mean_24_neutrality]]</span>
                            </div>
                        </div>




                    </li>
                    <li class="list-group-item" style="background-color: #383c48;">
                        <div style="display: flex;flex-direction: row; justify-content: space-between; ">
                            <div style="color: white;">
                                <span>POLARITY </span>
                            </div>

                            <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                                <span>[[mean_24_polarity]]</span>
                            </div>
                        </div>


                    <li class="list-group-item" style="background-color: #383c48;">
                        <div style="display: flex;flex-direction: row; justify-content: space-between; ">
                            <div style="color: white;">
                                <span>SUBJECTIVITY </span>
                            </div>

                            <div style="display: flex;flex-direction: column; justify-content: flex-end; color: white;">
                                <span>[[mean_24_subjectivity]] </span>
                            </div>
                        </div>
                    </li>
                </ul>




            </div>


        </div>

    </div>




    <button @click.native="get_positive_tweets()"> POSITIVE </button>
    <button @click.native="get_negative_tweets()"> NEGATIVE </button>
    <button @click.native="get_neutral_tweets()"> NEUTRAL </button>
    <div class="row flex-nowrap" style="background-color: bisque;overflow-y: scroll;padding : 0px; ">

        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12" v-for="tweet in tweet_list_basedOn_sentiment">

            <div class="card card-block"
                style="padding: 10px;display: flex; flex-direction: column;background-color: #383c48; color: white; ">
                <!-- TICKER-->
                <div id="tweet-top-container" style="background-color: none; display: flex;flex-direction: row;">

                    <div style="background-color: none;">
                        <img v-bind:src="`${tweet.user.profile_image_url}`" style="width: 60px;" class="rounded">
                    </div>

                    <div style="background-color: none; padding: 0 1rem;">
                        <div>
                            <span style="background-color: none;"> <b> [[tweet.user.name]] </b></span>
                        </div>
                        <!-- STOCK NAME-->
                        <div style=" text-overflow: ellipsis; overflow: hidden; color: whitesmoke;">
                            <span> @[[tweet.user.screen_name]]</span>

                        </div>
                    </div>

                </div>

                <div
                    style="display: inline-block; margin-top: 10px; height: 100px; overflow: hidden; text-overflow: ellipsis;">


                    <p>[[tweet.full_text]]</p>
                </div>

                <div style="display: flex; flex-direction: row; column-gap: 5; justify-content: stretch;">


                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa-solid fa-heart"></i>
                        </div>
                        <div style="background-color: none;">
                            [[tweet.favorite_count]]

                        </div>

                    </div>

                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa fa-retweet"></i>
                        </div>
                        <div style="background-color: none;">
                            [[tweet.retweet_count]]

                        </div>

                    </div>



                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa-solid fa-comment"></i>
                        </div>
                        <div style="background-color: none;">
                            24

                        </div>

                    </div>



                </div>
            </div>
        </div>
    </div>










    <div class="row" style="margin-top: 50px;min-height: 500px; height: auto; margin-bottom: 50px;">
        <div class="col" style="background-color: aquamarine;">
            <canvas id="pieChart" width="100%" height="100%"></canvas>
        </div>

        <div class="col" style="background-color: blue; height: 100%;">
            <h2> Word CLoud </h2>
            <!-- <div id="myChart"></div> -->
            <div>
                dsjvnsdvsjnvkdfa-spin

                vdsmvkdsmfa-flip-vertical

                dslkvsmd
                dvjdnslkvmsd

                sdvkvm

                dsvvkldfa-spinvsmlvmsd
            </div>


        </div>



    </div>




    <div class="row flex-wrap"
        style="background-color: bisque;padding : 0px; margin-top: 50px;max-height: 100%; height: auto; overflow-y: hidden; ">

        <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 col-6 " v-for="tweet in tweet_list_searched"
            style="margin-top: 10px;">

            <div class="card card-block"
                style="padding: 10px;display: flex; flex-direction: column;background-color: #383c48; color: white; ">
                <!-- TICKER-->
                <div id="tweet-top-container" style="background-color: none; display: flex;flex-direction: row;">

                    <div style="background-color: none;">
                        <img v-bind:src="`${tweet.user.profile_image_url}`" style="width: 60px;" class="rounded">
                    </div>

                    <div style="background-color: none; padding: 0 1rem;">
                        <div>
                            <span style="background-color: none;"> <b> [[tweet.user.name]] </b></span>
                        </div>
                        <!-- STOCK NAME-->
                        <div style=" text-overflow: ellipsis; overflow: hidden; color: whitesmoke;">
                            <span> @[[tweet.user.screen_name]]</span>

                        </div>
                    </div>

                </div>

                <div
                    style="display: inline-block; margin-top: 10px; height: 100px; overflow: hidden; text-overflow: ellipsis;">


                    <p>[[tweet.full_text]]</p>
                </div>

                <!-- <div style="display: flex; flex-direction: row; column-gap: 5; justify-content: stretch;">


                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa-solid fa-heart"></i>
                        </div>
                        <div style="background-color: none;">
                            [[tweet.favorite_count]]

                        </div>

                    </div>

                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa fa-retweet"></i>
                        </div>
                        <div style="background-color: none;">
                            [[tweet.retweet_count]]

                        </div>

                    </div>



                    <div style="flex: 1;display: flex; flex-direction: row;background-color: none;">
                        <div style="background-color: none; margin-right: 5px;">
                            <i class="fa-solid fa-comment"></i>
                        </div>
                        <div style="background-color: none;">
                            24

                        </div>

                    </div>



                </div> -->
            </div>
        </div>
    </div>








    <!-- 
    {% autoescape off %}
    {{ tweets }}
    {% endautoescape %} -->

</div>

{% endblock %} {% block scripts %}
<script>
    // List of words
    // List of words

    //   const labelsx = [
    //     'January',
    //     'February',
    //     'March',
    //     'April',
    //     'May',
    //     'June',
    //   ];

    //   const data = {
    //     labels: labelsx,
    //     datasets: [{
    //       label: 'My First dataset',
    //       backgroundColor: 'rgb(255, 99, 132)',
    //       borderColor: 'rgb(255, 99, 132)',
    //       data: [0, 10, 5, 2, 20, 30, 45],
    //     }]
    //   };

    //   const config = {
    //                 type: 'line',
    //                 data: data,
    //                 options: {
    //                     xAxes: [{
    //                     type: 'time',
    //                     time: {
    //                         parser: 'YYYY-MM-DD HH:mm:ss',
    //                         unit: 'minute',
    //                         displayFormats: {
    //                             'minute': 'YYYY-MM-DD HH:mm:ss',
    //                             'hour': 'YYYY-MM-DD HH:mm:ss'
    //                         }
    //                     },
    //                     ticks: {
    //                         source: 'data'
    //                     }
    //                 }]        }
    //              };

    //   const myChart = new Chart(
    //     document.getElementById('myChart'),
    //     config
    //   );

    ZC.LICENSE = ["569d52cefae586f634c54f86dc99e6a9", "b55b025e438fa8a98e32482b5f768ff5"];
    zingchart.MODULESDIR = 'https://cdn.zingchart.com/modules/';





    let myApp = Vue.createApp({
        delimiters: ["[[", "]]"],
        data() {
            return {
                ctx: null,
                currentPrice: 0,
                stockSocket: null,
                labelsx: null,
                data: null,
                config: null,
                myChart: null,
                tweet: null,
                labelSentiment: [],
                dataSentiment: [],
                configSentiment: null,
                sentimentChart: null,
                sentiment_ids: [],


                mean_24_compound: 0,
                mean_24_positivity: 0,
                mean_24_negativity: 0,
                mean_24_neutrality: 0,
                mean_24_polarity: 0,
                mean_24_subjectivity: 0,





                labelsPiedChart: [],
                dataPieChart: [],
                configPieChart: null,
                pieChart: null,
                optionsPieChart: null,


                wordsClouds: [],
                margin: null,
                svg: null,
                layout: null,


                tweet_list_searched: [],

                tweet_list_popular_recent: [],

                tweet_list_basedOn_sentiment: [],

                tweet_negative_list: [],
                tweet_neutral_list: [],
                tweet_positive_list: [],









            }
        },

        async created() {

            var stockPath = window.location.pathname.split('/');
            var stockSingle = stockPath[2].toLowerCase()

            this.stockSocket = new WebSocket(
                'ws://' +
                window.location.host +
                '/ws/singlestock/' +
                stockSingle + '/'

            );
            console.log(this.stockSocket)
            let self = this
            this.stockSocket.onmessage = function (e) {
                if (typeof e !== 'undefined') {
                    var response = JSON.parse(e.data);
                    console.log(response);


                    if (response.hasOwnProperty('graph')) {
                        console.log("exustubgs")
                        var prices = response.graph.data.map(x => x.open);
                        console.log(prices)
                        var dates = response.graph.data.map(x => x.date);
                        console.log(dates);

                        self.myChart.config.data.labels = dates;
                        self.myChart.config.data.datasets[0].data = prices;
                        self.myChart.update();
                    } else if (response.hasOwnProperty('sentiment')) {

                        let data = response.sentiment
                        console.log(data)

                        self.mean_24_compound = data.mean_compound;
                        self.mean_24_negativity = data.mean_negative;
                        self.mean_24_neutrality = data.mean_neutral;
                        self.mean_24_polarity = data.mean_polarity;
                        self.mean_24_positivity = data.mean_positive;

                        self.mean_24_subjectivity = data.mean_subjectivity;
                        self.pieChart.data.datasets[0].data = [data.positive_count, data.negative_count, data.neutral_count];

                        self.pieChart.update();
                        // self.sentimentChart.data.labels = data.dates;
                        self.sentimentChart.data.datasets[0].data = data.values_compound;
                        self.sentimentChart.data.datasets[1].data = data.values_positives;

                        self.sentimentChart.data.datasets[2].data = data.values_negatives;

                        self.sentimentChart.data.datasets[3].data = data.values_neutral;


                        self.sentimentChart.update();


                    } else if (response.hasOwnProperty('tweets_recent')) {

                        let data = response.tweets_recent
                        console.log("Updating recent tweets")

                        console.log(data)
                        this.tweets_recent = data





                    } else {
                        self.currentPrice = response.latestPrice;

                    }

                };




            };

            this.stockSocket.onclose = function (e) {
                console.log(e.error)
                console.error('Chat socket closed unexpectedly');
            };


            //make a get request
            var pathArray = window.location.pathname.split('/');
            console.log(pathArray[2].toLowerCase())
            var urlWithPath = "{%url 'singleticker:get_current_quote' 2000000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
            let response = await fetch(urlWithPath);
            if (response.ok) {
                let data = await response.json();
                console.log(data.stock_quote)
                this.currentPrice = data.stock_quote.latestPrice
            } else {
                alert("failed to load the list of hobbies");
            }









            this.labelsx = [


            ];

            this.data = {
                scaleFontColor: 'red',
                responsive: true,
                labels: this.labelsx,
                datasets: [{
                    label: 'Last 24 hours',
                    backgroundColor: 'rgb(255, 255, 255)',
                    borderColor: 'rgb(255, 255, 255)',
                    fill: false,
                    tension: 0.5,
                    data: [],
                }]
            };



            this.config = {
                type: 'line',
                data: this.data,
                options: {
                    plugins: {
                        zoom: {
                            zoom: {
                                wheel: {
                                    enabled: true,
                                },
                                pinch: {
                                    enabled: true
                                },
                                mode: 'xy',
                            }
                        }
                    },
                    legend: {
                        position: "top",
                        align: "end",

                        labels: {
                            fontColor: 'white'
                        }
                    },
                    scales: {
                        xAxes: [{
                            gridLines: {
                                display: false,
                            },
                            ticks: {
                                fontColor: "#fff", // this here
                            },
                        }],
                        yAxes: [{
                            display: true,
                            gridLines: {
                                display: false,
                            },
                            ticks: {
                                fontColor: "#fff", // this here
                            },
                        }],
                    }
                    // scales: {
                    //     x: {
                    //         type: 'time',
                    //         time: {
                    //             unit: 'day'
                    //         }
                    //     }
                    // }


                }

                // options: {
                //     plugins: {  // 'legend' now within object 'plugins {}'
                //         legend: {
                //             labels: {
                //                 color: "white",  // not 'fontColor:' anymore
                //                 // fontSize: 18  // not 'fontSize:' anymore

                //             },
                //             position: 'bottom'
                //         }
                //     },

                //     responsive: true,


                //     scales: {
                //         y: {
                //             ticks: {
                //                 color: "white"
                //             }
                //         },
                //         x: {

                //             ticks: {
                //                 color: "white"
                //             }
                //         }
                //     },
                //     xAxes: [{
                //         type: 'time',
                //         time: {
                //             parser: 'YYYY-MM-DD HH:mm:ss',
                //             unit: 'minute',
                //             displayFormats: {
                //                 'minute': 'YYYY-MM-DD HH:mm:ss',
                //                 'hour': 'YYYY-MM-DD HH:mm:ss'
                //             }
                //         },
                //         ticks: {
                //             source: 'data',
                //             fontColor: "white",

                //         }
                //     }],
                //     yAxes: [{
                //         ticks: {
                //             color: "white"
                //         }
                //     }]




                // }
            };



            this.myChart = new Chart(
                document.getElementById('stockChart'),
                this.config
            );
            var pathArray = window.location.pathname.split('/');

            var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
            histogramPath = histogramPath.replace("50000000000000", "5d")
            let responseHistogram = await fetch(histogramPath);
            if (responseHistogram.ok) {
                let data = await responseHistogram.json();

                //change data.map for dynamic
                var prices = data.stock_quote.map(x => x.open);
                console.log(prices)
                var dates = data.stock_quote.map(x => x.label);
                console.log(dates);
                const dataarray = ['2021-11-03']
                const item = [12]
                // console.log(data.stock_quote)


                // var mybarChart = document.getElementById('myChart');

                // console.log(mybarChart);

                this.myChart.config.data.labels = dates;
                this.myChart.data.datasets[0].data = prices;
                this.myChart.update();


                // this.myChart.data.labels = dataarray;
                // this.myChart.data.datasets[0].data = item;

                this.myChart.update();
            } else {
                alert("failed to load the list of hobbies");
            }




            //TWEET
            var urlWithPathTweet = "{%url 'singleticker:get_hot_tweet' %}";
            let responseTweet = await fetch(urlWithPathTweet);
            if (responseTweet.ok) {
                let data = await responseTweet.json();
                console.log("TWEET");
                data = JSON.parse(data.tweet);
                this.tweet = data;
                console.log(data)



            } else {
                console.log(response.error)
                alert("failed to load the list of hobbies");
            }









            this.labelSentiment = [

            ];

            this.dataSentiment = {
                labels: this.labelSentiment,
                datasets: [{
                    label: 'Compound',
                    backgroundColor: 'rgb(255, 99, 132)',
                    borderColor: 'rgb(255, 99, 132)',
                    fill: false,
                    data: [],
                }, {
                    label: 'Positive',
                    backgroundColor: 'rgb(120, 92, 22)',
                    borderColor: 'rgb(120, 92, 22)',
                    fill: false,
                    data: [],
                }, {
                    label: 'Negative',
                    backgroundColor: 'rgb(189, 185, 185)',
                    borderColor: 'rgb(189, 185, 185)',
                    fill: false,
                    data: [],
                },

                {
                    label: 'Neutral',
                    backgroundColor: 'rgb(68, 201, 126)',
                    borderColor: 'rgb(68, 201, 126)',
                    fill: false,
                    data: [],
                }, {
                    label: 'Polarity',
                    backgroundColor: 'rgb(134, 145, 100)',
                    borderColor: 'rgb(134, 145, 100)',
                    fill: false,
                    data: [],
                },

                {
                    label: 'Subjectivity',
                    backgroundColor: 'rgb(23, 27, 90)',
                    borderColor: 'rgb(23, 27, 90)',
                    fill: false,
                    data: [],
                },





                ]
            };

            this.configSentiment = {
                type: 'line',
                data: this.dataSentiment,
                options: {
                    responsive: true,
                    xAxes: [{
                        type: 'time',
                        time: {
                            parser: 'YYYY-MM-DD HH:mm:ss',
                            unit: 'minute',
                            displayFormats: {
                                'minute': 'YYYY-MM-DD HH:mm:ss',
                                'hour': 'YYYY-MM-DD HH:mm:ss'
                            }
                        },
                        ticks: {
                            source: 'data'
                        },
                        labels: {
                            fontColor: 'white'
                        }
                    }],
                    onClick: this.chartClickEvent.bind(this)
                    // onClick: function(evt, activeElements) {
                    //     var activePoints = this.sentimentChart.getElementsAtEvent(evt);
                    //     var elementIndex = activeElements[0]._index;
                    //     console.log(activePoints)
                    //         // this.data.datasets[0].pointBackgroundColor[elementIndex] = 'white';
                    //         // this.update();
                    // }



                },


            };



            this.sentimentChart = new Chart(
                document.getElementById('analysischart'),
                this.configSentiment
            );

            // this.sentimentChart.onclick = function(evt) {
            //     var activePoints = this.sentimentChart.getElementsAtEvent(evt);
            // };



            this.labelsPiedChart = [];

            this.dataPieChart = {
                labels: ["Positive", "Negative", "Neutral"],
                datasets: [{
                    label: 'Last 24 hours',
                    backgroundColor: [
                        'rgb(255, 99, 132)',
                        'rgb(54, 162, 235)',
                        'rgb(255, 205, 86)'
                    ],
                    hoverOffset: 4,
                    data: [],
                }]
            };

            // this.configPieChart = {
            //     type: 'doughnut',
            //     data: data,
            // };

            this.optionsPieChart = {
                responsive: true,
                title: {
                    display: true,
                    position: "top",
                    text: "Tweet Analyzed Count",
                    fontSize: 30,
                    fontColor: "#111"
                },
                legend: {
                    display: true,
                    position: "bottom",
                    labels: {
                        fontColor: "#333",
                        fontSize: 16
                    }
                },
                plugins: {
                    labels: {
                        render: 'label',
                        arc: true,
                        fontColor: '#000',
                        position: 'outside',
                        fontSize: 16
                    }
                }
            };
            this.configPieChart = {
                type: 'doughnut',
                data: this.dataPieChart,
                options: this.optionsPieChart
            };




            this.pieChart = new Chart(
                document.getElementById('pieChart'),
                this.configPieChart,

            );










            //GET SENTIMENT DATA


            var urlWithSentiment = "{%url 'singleticker:get_24_hours_sentiment' 2000000000000000 %}".replace("2000000000000000", pathArray[2].toLowerCase());
            let responseSentiment = await fetch(urlWithSentiment);
            if (responseSentiment.ok) {
                let data = await responseSentiment.json();
                console.log("Sentiment data");
                console.log(data)
                this.mean_24_compound = data.mean_compound
                this.mean_24_negativity = data.mean_negative
                this.mean_24_neutrality = data.mean_neutral
                this.mean_24_polarity = data.mean_polarity
                this.mean_24_positivity = data.mean_positive

                this.mean_24_subjectivity = data.mean_subjectivity
                this.pieChart.data.datasets[0].data = [data.positive_count, data.negative_count, data.neutral_count];

                this.pieChart.update();
                this.sentimentChart.data.labels = data.dates;
                this.sentimentChart.data.datasets[0].data = data.values_compound;
                this.sentimentChart.data.datasets[1].data = data.values_positives;

                this.sentimentChart.data.datasets[2].data = data.values_negatives;

                this.sentimentChart.data.datasets[3].data = data.values_neutral;
                this.sentimentChart.data.datasets[4].data = data.values_polarity;
                this.sentimentChart.data.datasets[5].data = data.values_subjectivity;
                this.sentiment_ids = data.list_ids;

                this.sentimentChart.update();

                var myConfig = {
                    type: 'wordcloud',
                    options: {
                        text: data.word_cloud_data,
                        ignore: ["America", "American", "Applause", "Because", "because", "could", "don’t", "people", "That’s", "that’s", "Their", "their", "there", "these", "thing", "those", "through", "We’re", "we’re", "where", "would"],
                        maxItems: 200,
                        aspect: 'flow-center',

                        colorType: 'palette',
                        palette: ['#D32F2F', '#5D4037', '#1976D2', '#E53935', '#6D4C41', '#1E88E5', '#F44336', '#795548', '#2196F3', '#EF5350', '#8D6E63', '#42A5F5'],

                        style: {
                            fontFamily: 'Crete Round',

                            hoverState: {
                                backgroundColor: '#D32F2F',
                                borderRadius: 2,
                                fontColor: 'white'
                            },
                            tooltip: {
                                text: '%text: %hits',
                                visible: true,
                                alpha: 0.9,
                                backgroundColor: '#1976D2',
                                borderRadius: 2,
                                borderColor: 'none',
                                fontColor: 'white',
                                fontFamily: 'Georgia',
                                textAlpha: 1
                            }
                        }
                    },

                    source: {
                        // text: '--President Barack Obama<br> Selma 50th anniversary speech<br>March 7, 2015',
                        // //Source: https://obamawhitehouse.archives.gov/the-press-office/2015/03/07/remarks-president-50th-anniversary-selma-montgomery-marches
                        // fontColor: '#64B5F6',
                        // fontSize: 10,
                        // fontFamily: 'Georgia',
                        // fontWeight: 'normal',
                        // marginBottom: '10%'
                    }


                };

                zingchart.bind('myChart', 'label_click', (e) => {
                    console.log('hi', e);
                    this.searchKywordFetching(e.text)


                });



                zingchart.render({
                    id: 'myChart',
                    data: myConfig,
                    height: '500',
                    width: '100%'
                });



            } else {
                console.log(response.error)
                alert("failed to load the list of hobbies");
            }

            //TWEETs popular list 
            var urlWithPathTweetPopular = "{%url 'singleticker:get_popular_tweets' 2000000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
            let responseTweerListPopular = await fetch(urlWithPathTweetPopular);
            if (responseTweerListPopular.ok) {
                let data = await responseTweerListPopular.json();

                console.log("Tweet popular fetched ");
                data = JSON.parse(data.tweets);
                console.log(data)
                this.tweet_list_popular_recent = data



            } else {
                console.log(response.error)
                alert("failed to load the list of hobbies");
            }

            //GET TWEETS BASED ON SENTIMENT 

            //TWEETs popular list 
            var urlWithPathTweetSentimental = "{%url 'singleticker:get_sentimental_tweets' 2000000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
            let responseTweerListSentimental = await fetch(urlWithPathTweetSentimental);
            if (responseTweerListSentimental.ok) {
                let data = await responseTweerListSentimental.json();

                console.log("Tweet sentimental fetched ");
                negatives = JSON.parse(data.negatives);
                positives = JSON.parse(data.positives);
                neutrals = JSON.parse(data.neutrals);
                console.log(data)
                this.tweet_negative_list = negatives

                this.tweet_neutral_list = neutrals
                this.tweet_positive_list = positives

                this.tweet_list_basedOn_sentiment = positives

            } else {
                console.log(response.error)
                alert("failed to load the list of hobbies");
            }



            this.searchKywordFetching(pathArray[2].toLowerCase())


        },
        methods: {

            async stockHistoryDynamics() {
                var pathArray = window.location.pathname.split('/');
                var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                histogramPath = histogramPath.replace("50000000000000", "dynamic")
                let responseHistogram = await fetch(histogramPath);
                if (responseHistogram.ok) {
                    let data = await responseHistogram.json();

                    //change data.map for dynamic
                    var prices = data.stock_quote.data.map(x => x.open);
                    console.log(prices)
                    var dates = data.stock_quote.data.map(x => x.date);
                    console.log(dates);

                    console.log(data.stock_quote)


                    // var mybarChart = document.getElementById('myChart');

                    // console.log(mybarChart);
                    console.log(dates);

                    this.myChart.data.labels = dates;
                    this.myChart.data.datasets[0].data = prices;
                    this.myChart.update();
                } else {
                    alert("failed to load the list of hobbies");
                }





            },
            async stockHistory5Days() {
                var pathArray = window.location.pathname.split('/');
                var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                histogramPath = histogramPath.replace("50000000000000", "5d")
                let responseHistogram = await fetch(histogramPath);
                if (responseHistogram.ok) {
                    let data = await responseHistogram.json();

                    //change data.map for dynamic
                    var prices = data.stock_quote.map(x => x.open);
                    console.log(prices)
                    var dates = data.stock_quote.map(x => x.date);
                    console.log(dates);

                    console.log(data.stock_quote)


                    // var mybarChart = document.getElementById('myChart');

                    // console.log(mybarChart);
                    console.log(dates);

                    this.myChart.data.labels = dates;
                    this.myChart.data.datasets[0].data = prices;
                    this.myChart.data.datasets[0].label = "Last 5 Days";
                    this.myChart.update();
                } else {
                    alert("failed to load the list of hobbies");
                }





            },
            async stockHistory1Month() {
                var pathArray = window.location.pathname.split('/');
                var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                histogramPath = histogramPath.replace("50000000000000", "1m")
                let responseHistogram = await fetch(histogramPath);
                if (responseHistogram.ok) {
                    let data = await responseHistogram.json();

                    //change data.map for dynamic
                    var prices = data.stock_quote.map(x => x.open);
                    console.log(prices)
                    var dates = data.stock_quote.map(x => x.date);
                    console.log(dates);

                    console.log(data.stock_quote)


                    // var mybarChart = document.getElementById('myChart');

                    // console.log(mybarChart);
                    console.log(dates);

                    this.myChart.data.labels = dates;
                    this.myChart.data.datasets[0].data = prices;
                    this.myChart.data.datasets[0].label = "Last Month";
                    this.myChart.update();
                } else {
                    alert("failed to load the list of hobbies");
                }





            },


            async stockHistory3Months() {
                var pathArray = window.location.pathname.split('/');
                var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                histogramPath = histogramPath.replace("50000000000000", "3m")
                let responseHistogram = await fetch(histogramPath);
                if (responseHistogram.ok) {
                    let data = await responseHistogram.json();

                    //change data.map for dynamic
                    var prices = data.stock_quote.map(x => x.open);
                    console.log(prices)
                    var dates = data.stock_quote.map(x => x.date);
                    console.log(dates);

                    console.log(data.stock_quote)


                    // var mybarChart = document.getElementById('myChart');

                    // console.log(mybarChart);
                    console.log(dates);

                    this.myChart.data.labels = dates;
                    this.myChart.data.datasets[0].data = prices;
                    this.myChart.data.datasets[0].label = "Last 3 Months";
                    this.myChart.update();
                } else {
                    alert("failed to load the list of hobbies");
                }





            },
            async stockHistory1Year() {
                var pathArray = window.location.pathname.split('/');
                var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                histogramPath = histogramPath.replace("50000000000000", "1y")
                let responseHistogram = await fetch(histogramPath);
                if (responseHistogram.ok) {
                    let data = await responseHistogram.json();

                    //change data.map for dynamic
                    var prices = data.stock_quote.map(x => x.open);
                    console.log(prices)
                    var dates = data.stock_quote.map(x => x.date);
                    console.log(dates);

                    console.log(data.stock_quote)


                    // var mybarChart = document.getElementById('myChart');

                    // console.log(mybarChart);
                    console.log(dates);

                    this.myChart.data.labels = dates;
                    this.myChart.data.datasets[0].data = prices;
                    this.myChart.data.datasets[0].label = "Last Year";
                    this.myChart.update();
                } else {
                    alert("failed to load the list of hobbies");
                }





            },

            async stockHistory5Years() {
                var pathArray = window.location.pathname.split('/');
                var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                histogramPath = histogramPath.replace("50000000000000", "5y")
                let responseHistogram = await fetch(histogramPath);
                if (responseHistogram.ok) {
                    let data = await responseHistogram.json();

                    //change data.map for dynamic
                    var prices = data.stock_quote.map(x => x.open);
                    console.log(prices)
                    var dates = data.stock_quote.map(x => x.date);
                    console.log(dates);

                    console.log(data.stock_quote)


                    // var mybarChart = document.getElementById('myChart');

                    // console.log(mybarChart);
                    console.log(dates);

                    this.myChart.data.labels = dates;
                    this.myChart.data.datasets[0].data = prices;
                    this.myChart.data.datasets[0].label = "Last 5 Years";
                    this.myChart.update();
                } else {
                    alert("failed to load the list of hobbies");
                }





            },


            async stockHistoryMax() {
                var pathArray = window.location.pathname.split('/');
                var histogramPath = "{%url 'singleticker:get_time_history' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                histogramPath = histogramPath.replace("50000000000000", "max")
                let responseHistogram = await fetch(histogramPath);
                if (responseHistogram.ok) {
                    let data = await responseHistogram.json();

                    //change data.map for dynamic
                    var prices = data.stock_quote.map(x => x.open);
                    console.log(prices)
                    var dates = data.stock_quote.map(x => x.date);
                    console.log(dates);

                    console.log(data.stock_quote)


                    // var mybarChart = document.getElementById('myChart');

                    // console.log(mybarChart);
                    console.log(dates);

                    this.myChart.data.labels = dates;
                    this.myChart.data.datasets[0].data = prices;
                    this.myChart.data.datasets[0].label = "Max";
                    this.myChart.update();
                } else {
                    alert("failed to load the list of hobbies");
                }





            },



            async sentimentAnalysis24Hours() {
                var pathArray = window.location.pathname.split('/');

                var urlWithSentiment = "{%url 'singleticker:get_24_hours_sentiment' 2000000000000000 %}".replace("2000000000000000", pathArray[2].toLowerCase());
                let responseSentiment = await fetch(urlWithSentiment);

                if (responseSentiment.ok) {
                    let data = await responseSentiment.json();
                    console.log("Sentiment data");
                    console.log(data)
                    this.mean_24_compound = data.mean_compound
                    this.mean_24_negativity = data.mean_negative
                    this.mean_24_neutrality = data.mean_neutral
                    this.mean_24_polarity = data.mean_polarity
                    this.mean_24_positivity = data.mean_positive

                    this.mean_24_subjectivity = data.mean_subjectivity
                    this.pieChart.data.datasets[0].data = [data.positive_count, data.negative_count, data.neutral_count];

                    this.pieChart.update();
                    this.sentimentChart.data.labels = data.dates;
                    this.sentimentChart.data.datasets[0].data = data.values_compound;
                    this.sentimentChart.data.datasets[1].data = data.values_positives;

                    this.sentimentChart.data.datasets[2].data = data.values_negatives;

                    this.sentimentChart.data.datasets[3].data = data.values_neutral;
                    this.sentimentChart.data.datasets[4].data = data.values_polarity;
                    this.sentimentChart.data.datasets[5].data = data.values_subjectivity;
                    this.sentiment_ids = data.list_ids;
                    this.sentimentChart.update();





                }
            },
            async sentimentAnalysisRange(time_range) {
                var pathArray = window.location.pathname.split('/');

                var urlWithSentiment = "{%url 'singleticker:get_time_range_sentiment' 2000000000000000 50000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase());
                var urlWithSentimeWithDaterange = urlWithSentiment.replace('50000000000000', time_range)
                let responseSentiment = await fetch(urlWithSentimeWithDaterange);
                if (responseSentiment.ok) {
                    let data = await responseSentiment.json();
                    console.log("Sentiment data");
                    console.log(data)
                    this.mean_24_compound = data.mean_compound
                    this.mean_24_negativity = data.mean_negative
                    this.mean_24_neutrality = data.mean_neutral
                    this.mean_24_polarity = data.mean_polarity
                    this.mean_24_positivity = data.mean_positive

                    this.mean_24_subjectivity = data.mean_subjectivity
                    this.pieChart.data.datasets[0].data = [data.positive_count, data.negative_count, data.neutral_count];

                    this.pieChart.update();
                    this.sentimentChart.data.labels = data.dates;
                    this.sentimentChart.data.datasets[0].data = data.values_compound;
                    this.sentimentChart.data.datasets[1].data = data.values_positives;

                    this.sentimentChart.data.datasets[2].data = data.values_negatives;

                    this.sentimentChart.data.datasets[3].data = data.values_neutral;
                    this.sentimentChart.data.datasets[4].data = data.values_polarity;
                    this.sentimentChart.data.datasets[5].data = data.values_subjectivity;
                    this.sentiment_ids = data.list_ids;
                    this.sentimentChart.update();

                    // let output = zingchart.exec('mychart', 'updateobject', {
                    //     type: 'wordcloud',
                    //     options: {
                    //         text: data.word_cloud_data,
                    //         ignore: ["America", "American", "Applause", "Because", "because", "could", "don’t", "people", "That’s", "that’s", "Their", "their", "there", "these", "thing", "those", "through", "We’re", "we’re", "where", "would"],
                    //         maxItems: 200,
                    //         aspect: 'flow-center',

                    //         colorType: 'palette',
                    //         palette: ['#D32F2F', '#5D4037', '#1976D2', '#E53935', '#6D4C41', '#1E88E5', '#F44336', '#795548', '#2196F3', '#EF5350', '#8D6E63', '#42A5F5'],

                    //         style: {
                    //             fontFamily: 'Crete Round',

                    //             hoverState: {
                    //                 backgroundColor: '#D32F2F',
                    //                 borderRadius: 2,
                    //                 fontColor: 'white'
                    //             },
                    //             tooltip: {
                    //                 text: '%text: %hits',
                    //                 visible: true,
                    //                 alpha: 0.9,
                    //                 backgroundColor: '#1976D2',
                    //                 borderRadius: 2,
                    //                 borderColor: 'none',
                    //                 fontColor: 'white',
                    //                 fontFamily: 'Georgia',
                    //                 textAlpha: 1
                    //             }
                    //         }
                    //     }
                    // });
                    // zcdocs.demos.dump('updateobject', output);



                }
            },

            async searchKywordFetching(keyword) {

                //TWEETs list 
                var urlWithPathTweetSearch = "{%url 'singleticker:get_search_tweets' 2000000000000000%}".replace("2000000000000000", keyword)
                let responseTweerList = await fetch(urlWithPathTweetSearch);
                if (responseTweerList.ok) {
                    let data = await responseTweerList.json();

                    console.log("TWEET");
                    data = JSON.parse(data.tweets);
                    console.log(data)
                    this.tweet_list_searched = data;



                } else {
                    console.log(response.error)
                    alert("failed to load the list of hobbies");
                }
            },

            async getRecentTweets() {
                var pathArray = window.location.pathname.split('/');
                var urlWithPathTweetPopular = "{%url 'singleticker:get_recent_tweets' 2000000000000000%}".replace("2000000000000000", pathArray[2].toLowerCase())
                let responseTweerListPopular = await fetch(urlWithPathTweetPopular);
                if (responseTweerListPopular.ok) {
                    let data = await responseTweerListPopular.json();

                    console.log("Tweet recent  fetched ");
                    data = JSON.parse(data.tweets);
                    console.log(data)
                    this.tweet_list_popular_recent = data



                } else {
                    console.log(response.error)
                    alert("failed to load the list of hobbies");
                }
            },

            get_positive_tweets() {
                this.tweet_list_basedOn_sentiment = this.tweet_positive_list
            },

            get_negative_tweets() {
                this.tweet_list_basedOn_sentiment = this.tweet_negative_list
            },
            get_neutral_tweets() {
                this.tweet_list_basedOn_sentiment = this.tweet_neutral_list
            },
            chartClickEvent(event, array) {
                let activeElement = this.sentimentChart.getElementAtEvent(event);
                let activeDataSet = this.sentimentChart.getDatasetAtEvent(event);
                console.log(activeDataSet)
                console.log(activeElement)
                if (activeElement.length > 0) {
                    var clickedDatasetIndex = activeDataSet[0]._datasetIndex;
                    var clickedDatasetIndex = activeDataSet[0]._datasetIndex;
                    var clickedElementIndex = activeElement[0]._index;
                    var value = this.sentimentChart.data.datasets[clickedDatasetIndex].data[clickedElementIndex];
                    var line = this.sentimentChart.data.datasets[clickedDatasetIndex].label
                    var label = this.sentimentChart.data.labels[clickedElementIndex]
                    console.log(label)
                    console.log(value)
                    console.log(line)
                    console.log(this.sentiment_ids[clickedElementIndex])
                    this.getSingleTweet(line, this.sentiment_ids[clickedElementIndex])
                }
                // console.log(activeElement[0].label)
                // console.log(activeElement[0].x)
                // console.log(activeElement[0].y)
                // console.log(activeElement[0].value)

            },

            async getSingleTweet(sentimentType, record_id) {

                //TWEET
                var pathArray = window.location.pathname.split('/');
                let baseUrl = "{%url 'singleticker:get_single_tweet_sentiment' 2000000000000000 50000000000000%}".replace("2000000000000000", sentimentType.toLowerCase());
                let baseUrlSentiment = baseUrl.replace("50000000000000", record_id);
                var tempUrl = baseUrlSentiment.replace(/%20/g, "");
                let responseTweet = await fetch(tempUrl);
                if (responseTweet.ok) {
                    let data = await responseTweet.json();
                    console.log("TWEET");
                    data = JSON.parse(data.single_tweet);
                    this.tweet = data;
                    console.log(data)



                } else {
                    console.log(response.error)
                    alert("failed to load the list of hobbies");
                }
            }





        }
    });
    myApp.mount('#app');
</script>
{% endblock %}
